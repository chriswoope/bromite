From: uazo <uazo@users.noreply.github.com>
Date: Wed, 19 Jan 2022 12:39:24 +0000
Subject: Remove fetching google fonts from gms

---
 .../content/browser/font/AndroidFontLookupImpl.java       | 2 ++
 third_party/blink/common/features.cc                      | 2 +-
 third_party/blink/renderer/platform/fonts/font_cache.cc   | 8 ++++----
 3 files changed, 7 insertions(+), 5 deletions(-)

diff --git a/content/public/android/java/src/org/chromium/content/browser/font/AndroidFontLookupImpl.java b/content/public/android/java/src/org/chromium/content/browser/font/AndroidFontLookupImpl.java
--- a/content/public/android/java/src/org/chromium/content/browser/font/AndroidFontLookupImpl.java
+++ b/content/public/android/java/src/org/chromium/content/browser/font/AndroidFontLookupImpl.java
@@ -244,6 +244,8 @@ public class AndroidFontLookupImpl implements AndroidFontLookup {
      * @return An opened font file descriptor, or null if the font file is not available.
      */
     private ParcelFileDescriptor tryFetchFont(String fontUniqueName) {
+        if ((true)) return null;
+
         ParcelFileDescriptor cachedFd = mFetchedFontCache.get(fontUniqueName);
         if (cachedFd != null) {
             try {
diff --git a/third_party/blink/common/features.cc b/third_party/blink/common/features.cc
--- a/third_party/blink/common/features.cc
+++ b/third_party/blink/common/features.cc
@@ -57,7 +57,7 @@ const base::FeatureParam<double> kMinimumEntropyForLCP{
     &kExcludeLowEntropyImagesFromLCP, "min_bpp", 2};
 
 const base::Feature kGMSCoreEmoji{"GMSCoreEmoji",
-                                  base::FEATURE_ENABLED_BY_DEFAULT};
+                                  base::FEATURE_DISABLED_BY_DEFAULT};
 
 // Whether the HandwritingRecognition API can be enabled by origin trial.
 // Disabling this feature disables both the origin trial and the mojo interface.
diff --git a/third_party/blink/renderer/platform/fonts/font_cache.cc b/third_party/blink/renderer/platform/fonts/font_cache.cc
--- a/third_party/blink/renderer/platform/fonts/font_cache.cc
+++ b/third_party/blink/renderer/platform/fonts/font_cache.cc
@@ -299,10 +299,10 @@ scoped_refptr<SimpleFontData> FontCache::FontDataFromFontPlatformData(
     const FontPlatformData* platform_data,
     ShouldRetain should_retain,
     bool subpixel_ascent_descent) {
-#if DCHECK_IS_ON()
-  if (should_retain == kDoNotRetain)
-    DCHECK(purge_prevent_count_);
-#endif
+// #if DCHECK_IS_ON()
+//   if (should_retain == kDoNotRetain)
+//     DCHECK(purge_prevent_count_);
+// #endif
 
   return font_data_cache_.Get(platform_data, should_retain,
                               subpixel_ascent_descent);
--
2.25.1
